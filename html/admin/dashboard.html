<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <script src="/public/js/cargarReutilizable.js"></script>
    <link rel="stylesheet" href="/public/css/comun.css">
    <link rel="stylesheet" href="/public/css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> 
</head>
<body>
   <div id="header"></div>
    <div class="container">
        <h1>Agregar Producto</h1>
<form  enctype="multipart/form-data">
    <label for="nombre">Nombre del Producto</label>
    <input type="text" id="nombre" name="nombre" required>

    <label for="descripcion">Descripción</label>
    <textarea id="descripcion" name="descripcion" required></textarea>

    <label for="procesador">Procesador</label>
    <input type="text" id="procesador" name="procesador" required>

    <label for="ram">RAM</label>
    <select id="ram" name="ram" required>
        <option value="4GB">4GB</option>
        <option value="8GB">8GB</option>
        <option value="16GB">16GB</option>
        <option value="32GB">32GB</option>
        <option value="64GB">64GB</option>
    </select>

    <label for="rom">Almacenamiento</label>
    <select id="rom" name="rom" required>
        <option value="128GB">128GB</option>
        <option value="180GB">180GB</option>
        <option value="256GB">256GB</option>
        <option value="512GB">512GB</option>
        <option value="1TB">1TB</option>
        <option value="2TB">2TB</option>
    </select>

    <label for="tipo_almacenamiento">Tipo de Almacenamiento</label>
    <select id="tipo_almacenamiento" name="tipo_almacenamiento" required>
        <option value="SSD">SSD</option>
        <option value="HDD">HDD</option>
    </select>

    <label for="precio">Precio</label>
    <input type="number" id="precio" name="precio" required>

    <label for="stock">Stock</label>
    <input type="number" id="stock" name="stock" required>

    <label for="tamano_pantalla">Tamaño de Pantalla</label>
    <select id="tamano_pantalla" name="tamano_pantalla" required>
        <option value="12.5">12.5"</option>
        <option value="14">14"</option>
        <option value="15.6">15.6"</option>
        <option value="17.3">17.3"</option>
    </select>

    <label for="resolucion_pantalla">Resolución de Pantalla</label>
    <select id="resolucion_pantalla" name="resolucion_pantalla" required>
        <option value="1080x1920">1080x1920 (FHD)</option>
        <option value="1366x768">1366x768 (HD)</option>
        <option value="2560x1440">2560x1440 (QHD)</option>
        <option value="3840x2160">3840x2160 (4K)</option>
    </select>


    <label for="sistema_operativo">Sistema Operativo</label>
    <input type="text" id="sistema_operativo" name="sistema_operativo" required>

    <label for="tarjeta_grafica">Tarjeta Gráfica</label>
    <input type="text" id="tarjeta_grafica" name="tarjeta_grafica" required>

    <label for="peso">Peso</label>
    <input type="number" step="0.01" id="peso" name="peso" required>

    <label for="dimensiones">Dimensiones</label>
    <input type="text" id="dimensiones" name="dimensiones" required>

    <label for="garantia_meses">Garantía (Meses)</label>
    <input type="text" id="garantia_meses" name="garantia_meses" required>

    <label for="categoria">Categoría</label>
    <select id="categoria" name="categoria" required>
        <option value="oficina">Oficina</option>
        <option value="gamer">Gamer</option>
        <option value="trabajo">Trabajo</option>
        <option value="estudio">Estudio</option>
    </select>

    <label for="marca">Marca</label>
    <select id="marca" name="marca" required>
        <option value="Lenovo">Lenovo</option>
        <option value="Asus">Asus</option>
        <option value="HP">HP</option>
        <option value="Toshiba">Toshiba</option>
        <option value="Dell">Dell</option>
        <option value="Acer">Acer</option>
        <option value="Apple">Apple</option>
        <option value="Microsoft">Microsoft</option>
        <option value="Razer">Razer</option>
        <option value="Samsung">Samsung</option>
        <option value="MSI">MSI</option>
        <option value="Gigabyte">Gigabyte</option>
        <option value="Alienware">Alienware</option>
        <option value="Huawei">Huawei</option>
        <option value="LG">LG</option>
        <option value="Vaio">Vaio</option>
        <option value="Google">Google</option>
    </select>
    

    <label for="fecha_lanzamiento">Fecha de Lanzamiento</label>
    <input type="date" id="fecha_lanzamiento" name="fecha_lanzamiento" required>

    <label for="imagenes">Imágenes del Producto</label>
    <input type="file" id="imagenes" name="imagenes" multiple required>

    <button type="submit">Agregar Producto</button>
</form>

    </div>
    <div id="footer"></div>    

    <script>
   const form = document.querySelector('form');

form.addEventListener('submit', (e) => {
    e.preventDefault(); // Evitar envío por defecto del formulario
    const formData = new FormData(form);

    fetch('/add-product', {
        method: 'POST',
        body: formData
    })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                Swal.fire({
                    title: '¡Éxito!',
                    text: 'Producto agregado correctamente.',
                    icon: 'success',
                    confirmButtonText: 'Ir al Dashboard'
                }).then(() => {
                    window.location.href = '/html/admin/dashboard.html'; 
                });
            } else {
                Swal.fire({
                    title: 'Error',
                    text: data.message || 'Hubo un problema al agregar el producto.',
                    icon: 'error',
                    confirmButtonText: 'Cerrar'
                });
            }
        })
        .catch(() => {
            Swal.fire({
                title: 'Error',
                text: 'No se pudo conectar con el servidor.',
                icon: 'error',
                confirmButtonText: 'Cerrar'
            });
        });
});

    </script>

</body>
</html>